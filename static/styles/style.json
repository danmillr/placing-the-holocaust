{
  "version": 8,
  "name": "placing-holocaust (with gazetteer + working glyphs)",
  "metadata": { "maputnik:renderer": "mlgljs" },
  "sprite": "https://openmaptiles.github.io/maptiler-toner-gl-style/sprite",
  "glyphs": "https://protomaps.github.io/basemaps-assets/fonts/{fontstack}/{range}.pbf",

  "sources": {
    "european_countries": {
      "type": "vector",
      "url": "pmtiles://https://placing-holocaust-tiles.s3.us-east-2.amazonaws.com/european_countries.pmtiles"
    },
    "rivers": {
      "type": "vector",
      "url": "pmtiles://https://placing-holocaust-tiles.s3.us-east-2.amazonaws.com/major_rivers.pmtiles"
    },
    "major_cities": {
      "type": "vector",
      "url": "pmtiles://https://placing-holocaust-tiles.s3.us-east-2.amazonaws.com/major_cities.pmtiles"
    },
    "ghetto_regions": {
      "type": "vector",
      "url": "pmtiles://https://placing-holocaust-tiles.s3.us-east-2.amazonaws.com/ghetto_regions_multi.pmtiles"
    },
    "gazetteer_basemap": {
      "type": "vector",
      "url": "pmtiles://https://placing-holocaust-tiles.s3.us-east-2.amazonaws.com/gazetteer_processed.pmtiles"
    }
  },

  "layers": [
    { "id": "background", "type": "background", "paint": { "background-color": "#2f2f2f" } },

    {
      "id": "ghetto-regions-fill",
      "type": "fill",
      "source": "ghetto_regions",
      "source-layer": "ghetto_regions",
      "filter": ["!=", ["get", "Region_Enc"], "Russia"],
      "paint": {
        "fill-color": "#ffffff",
        "fill-opacity": 1
      }
    },
    {
      "id": "ghetto-regions-outline",
      "type": "line",
      "source": "ghetto_regions",
      "source-layer": "ghetto_regions",
      "filter": ["!=", ["get", "Region_Enc"], "Russia"],
      "paint": {
        "line-color": "#5f5f5f",
        "line-width": 1
      }
    },
    {
      "id": "ghetto-regions-labels",
      "type": "symbol",
      "source": "ghetto_regions",
      "source-layer": "ghetto_regions_labels",
      "filter": ["!=", ["get", "Region_Enc"], "Russia"],
      "minzoom": 4,
      "layout": {
        "text-field": [
          "step",
          ["zoom"],
          ["upcase", ["coalesce", ["get", "RgAbbr"], ["get", "Region_Enc"]]],
          6, ["upcase", ["get", "Region_Enc"]]
        ],
        "text-font": ["Noto Sans Regular"],
        "text-size": ["interpolate", ["linear"], ["zoom"], 4, 10, 6, 11.5, 8, 13, 10, 15.5],
        "text-padding": 2,
        "text-max-width": 12,
        "text-allow-overlap": false,
        "symbol-sort-key": [
          "-",
          ["coalesce", ["to-number", ["get", "RgArea_Km2"]], 0]
        ]
      },
      "paint": {
        "text-color": "#404040",
        "text-halo-color": "#f3f3f3",
        "text-halo-width": 1.2,
        "text-opacity": 0.9
      }
    },

    {
      "id": "rivers",
      "type": "line",
      "source": "rivers",
      "source-layer": "major_rivers",
      "paint": {
        "line-color": "#868686",
        "line-width": ["interpolate", ["linear"], ["zoom"], 3, 0.2, 6, 0.6, 8, 1.2, 12, 2.2],
        "line-opacity": 0.5
      }
    },
    {
      "id": "river-labels",
      "type": "symbol",
      "source": "rivers",
      "source-layer": "major_rivers",
      "minzoom": 5,
      "layout": {
        "symbol-placement": "line",
        "text-field": ["get", "NAME"],
        "text-font": ["Noto Sans Regular"],
        "text-size": ["interpolate", ["linear"], ["zoom"], 5, 10, 8, 12, 12, 13],
        "text-padding": 2,
        "text-letter-spacing": 0.05
      },
      "paint": {
        "text-color": "#194b70",
        "text-halo-color": "#f3f3f3",
        "text-halo-width": 1.25,
        "text-opacity": 0.9
      }
    },

    {
      "id": "gazetteer-points",
      "type": "circle",
      "source": "gazetteer_basemap",
      "source-layer": "gazetteer_full_output_processed",
      "minzoom": 6,
      "paint": {
        "circle-color": "#9aa0a6",
        "circle-opacity": 0.85,
        "circle-stroke-color": "#ffffff",
        "circle-stroke-width": ["interpolate", ["linear"], ["zoom"], 6, 0.25, 10, 0.5],
        "circle-radius": ["interpolate", ["linear"], ["zoom"], 6, 1.6, 10, 2.6, 14, 3.4]
      }
    },
    {
      "id": "gazetteer-labels",
      "type": "symbol",
      "source": "gazetteer_basemap",
      "source-layer": "gazetteer_full_output_processed",
      "minzoom": 7,
      "layout": {
        "text-field": ["get", "SiteName"],
        "text-font": ["Noto Sans Regular"],
        "text-size": ["interpolate", ["linear"], ["zoom"], 7, 11, 10, 12.5, 14, 14],
        "text-variable-anchor": ["top", "bottom", "left", "right"],
        "text-radial-offset": 0.25,
        "text-padding": 2,
        "text-max-width": 10,
        "text-allow-overlap": false
      },
      "paint": {
        "text-color": "#666666",
        "text-halo-color": "#f3f3f3",
        "text-halo-width": 1.0,
        "text-halo-blur": 0.25,
        "text-opacity": ["interpolate", ["linear"], ["zoom"], 7, 0.85, 10, 0.95]
      }
    },

    {
      "id": "city-dots",
      "type": "circle",
      "source": "major_cities",
      "source-layer": "major_cities",
      "minzoom": 3,
      "paint": {
        "circle-color": "#222222",
        "circle-stroke-color": "#ffffff",
        "circle-stroke-width": ["interpolate", ["linear"], ["zoom"], 3, 0.25, 7, 0.5, 10, 0.75],
        "circle-radius": ["interpolate", ["linear"], ["zoom"], 3, 1.4, 6, 2.2, 10, 3.2],
        "circle-opacity": 0.9
      }
    },
    {
      "id": "city-labels",
      "type": "symbol",
      "source": "major_cities",
      "source-layer": "major_cities",
      "minzoom": 3,
      "layout": {
        "text-field": ["get", "CityName"],
        "text-font": ["Noto Sans Regular"],
        "text-size": ["interpolate", ["linear"], ["zoom"], 3, 10, 6, 12, 10, 14.5],
        "text-variable-anchor": ["top", "bottom", "left", "right"],
        "text-radial-offset": 0.25,
        "text-padding": 2,
        "text-max-width": 10,
        "text-allow-overlap": false
      },
      "paint": {
        "text-color": "#1f1f1f",
        "text-halo-color": "#ffffff",
        "text-halo-width": 1.25,
        "text-halo-blur": 0.25,
        "text-opacity": ["interpolate", ["linear"], ["zoom"], 3, 0.85, 8, 0.95]
      }
    }
  ],
  "id": "c4268e48-fac9-4478-8120-201224fbd4d8"
}
